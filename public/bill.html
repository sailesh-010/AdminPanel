<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Jha System - Create Bill</title>

	<script src="https://cdn.tailwindcss.com"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

	<style>
		body { font-family: 'Inter', sans-serif; }

		::-webkit-scrollbar {
			width: 8px;
			height: 8px;
		}
		::-webkit-scrollbar-track {
			background: #f1f1f1;
		}
		::-webkit-scrollbar-thumb {
			background: #c1c1c1;
			border-radius: 4px;
		}
		::-webkit-scrollbar-thumb:hover {
			background: #a8a8a8;
		}

		.active-mode {
			background-color: #E53935;
			color: white;
			box-shadow: 0 2px 4px rgba(229, 57, 53, 0.2);
		}
	</style>
</head>
<body class="bg-gray-50 text-gray-800 h-screen overflow-hidden flex">

	<!-- Sidebar Container -->
	<div id="sidebar-container"></div>

	<!-- MAIN CONTENT -->
	<main class="flex-1 flex flex-col min-w-0 h-full">
		<!-- Header -->
		<header class="bg-white border-b border-gray-200 h-16 flex items-center justify-between px-4 lg:px-8 z-10">
			<div class="flex items-center gap-4 flex-1">
				<button onclick="toggleSidebar()" class="lg:hidden text-gray-500 hover:text-red-500 p-1">
					<i class="fa-solid fa-bars text-xl"></i>
				</button>
				<div class="relative w-full max-w-md hidden sm:block">
					<span class="absolute left-3 top-2.5 text-gray-400">
						<i class="fa-solid fa-magnifying-glass"></i>
					</span>
					<input type="text" placeholder="Search items, bills, or customers..." class="w-full bg-gray-100 hover:bg-gray-50 focus:bg-white border border-transparent focus:border-red-200 rounded-lg py-2 pl-10 pr-4 text-sm transition-all focus:outline-none focus:ring-2 focus:ring-red-100">
				</div>
			</div>
			<div class="flex items-center gap-4 lg:gap-6">
				<button class="relative text-gray-400 hover:text-red-500 transition p-2 rounded-full hover:bg-gray-50">
					<i class="fa-regular fa-bell text-xl"></i>
					<span class="absolute top-1.5 right-2 h-2.5 w-2.5 bg-red-500 rounded-full border-2 border-white"></span>
				</button>
				<div class="h-8 w-px bg-gray-200 hidden sm:block"></div>
				<div class="flex items-center gap-3 cursor-pointer p-1 rounded-lg hover:bg-gray-50 transition">
					<div class="text-right hidden sm:block">
						<p class="text-sm font-bold text-gray-800 leading-none">Admin User</p>
						<p class="text-[10px] text-gray-500 font-medium uppercase mt-1">Store Manager</p>
					</div>
					<div class="h-10 w-10 rounded-full bg-gradient-to-br from-red-100 to-red-200 text-red-600 border border-red-200 flex items-center justify-center font-bold shadow-sm">
						AU
					</div>
				</div>
			</div>
		</header>

		<!-- Content -->
		<div class="flex-1 overflow-y-auto p-4 lg:p-8">
			<div class="flex flex-col sm:flex-row sm:items-end justify-between gap-4 mb-8">
				<div>
					<h2 class="text-2xl font-bold text-gray-900">Create Bill</h2>
					<p class="text-gray-500 text-sm mt-1">Generate a new bill and track payments.</p>
				</div>
				<div class="flex items-center gap-2 bg-white p-1 rounded-lg border border-gray-300 w-fit">
					<button id="sellModeBtn" class="px-4 py-2 rounded-md font-medium transition active-mode" onclick="switchBillMode('sell')">
						<i class="fa-solid fa-arrow-up-right-dots mr-2"></i> Sell
					</button>
					<button id="buyModeBtn" class="px-4 py-2 rounded-md font-medium transition" onclick="switchBillMode('buy')">
						<i class="fa-solid fa-arrow-down-left-dots mr-2"></i> Buy
					</button>
				</div>
			</div>

			<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
				<!-- Left: Bill Form -->
				<div class="lg:col-span-2 space-y-6">
					<div id="retailerSection" class="bg-white rounded-xl border border-gray-200 p-6">
						<h3 class="text-lg font-bold text-gray-900 mb-4"><i class="fa-solid fa-user-tie text-red-500 mr-2"></i> <span id="partyLabel">Retailer</span> Info</h3>
						<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
							<div>
								<label id="partyNameLabel" class="block text-sm font-medium text-gray-700 mb-1">Retailer</label>
								<input id="retailerName" type="text" placeholder="e.g., Sita Retailers, Gopal Kirana" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-100 focus:border-red-300 outline-none transition">
							</div>
							<div>
								<label class="block text-sm font-medium text-gray-700 mb-1">Contact Number</label>
								<input id="contactNumber" type="text" placeholder="98XXXXXXXX" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-100 focus:border-red-300 outline-none transition">
							</div>
							<div>
								<label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
								<input id="email" type="email" placeholder="example@mail.com" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-100 focus:border-red-300 outline-none transition">
							</div>
							<div>
								<label class="block text-sm font-medium text-gray-700 mb-1">Address</label>
								<input id="address" type="text" placeholder="Address" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-100 focus:border-red-300 outline-none transition">
							</div>
						</div>
					</div>

					<div class="bg-white rounded-xl border border-gray-200 p-6">
						<h3 class="text-lg font-bold text-gray-900 mb-4"><i class="fa-solid fa-receipt mr-2 text-red-500"></i> Bill Details</h3>
						<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
							<div>
								<label class="block text-sm font-medium text-gray-700 mb-1">Bill Title</label>
								<input id="billTitle" type="text" placeholder="e.g., January Sale" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-100 focus:border-red-300 outline-none transition">
							</div>
							<div>
								<label class="block text-sm font-medium text-gray-700 mb-1">Bill Date</label>
								<input id="billDate" type="date" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-100 focus:border-red-300 outline-none transition">
							</div>
							<div>
								<label class="block text-sm font-medium text-gray-700 mb-1">Payment Method</label>
								<select id="paymentMethod" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-100 focus:border-red-300 outline-none transition bg-white">
									<option value="">Select method</option>
									<option value="cash">Cash</option>
									<option value="card">Card</option>
									<option value="upi">UPI</option>
									<option value="credit">Credit</option>
								</select>
							</div>
						</div>
					</div>

					<div class="bg-white rounded-xl border border-gray-200 p-6">
						<h3 class="text-lg font-bold text-gray-900 mb-4"><i class="fa-solid fa-cart-plus mr-2 text-red-500"></i> Add Items</h3>
						<div class="grid grid-cols-1 md:grid-cols-5 gap-3 items-end">
							<div class="md:col-span-2">
								<label class="block text-sm font-medium text-gray-700 mb-1">Product Name</label>
								<input id="productName" type="text" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-100 focus:border-red-300 outline-none transition" placeholder="Product">
							</div>
							<div>
								<label class="block text-sm font-medium text-gray-700 mb-1">Min Size</label>
								<input id="minSize" type="number" min="0" step="0.1" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-100 focus:border-red-300 outline-none transition" placeholder="0">
							</div>
							<div>
								<label class="block text-sm font-medium text-gray-700 mb-1">Max Size</label>
								<input id="maxSize" type="number" min="0" step="0.1" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-100 focus:border-red-300 outline-none transition" placeholder="0">
							</div>
							<div>
								<label class="block text-sm font-medium text-gray-700 mb-1">Unit</label>
								<select id="unit" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-100 focus:border-red-300 outline-none transition bg-white">
									<option value="">Unit</option>
									<option value="pcs">pcs</option>
									<option value="kg">kg</option>
									<option value="m">m</option>
									<option value="pair">pair</option>
								</select>
							</div>
							<div>
								<label class="block text-sm font-medium text-gray-700 mb-1">Unit Price</label>
								<input id="unitPrice" type="number" min="0" step="0.01" class="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-100 focus:border-red-300 outline-none transition" placeholder="0">
							</div>
							<div class="md:col-span-5 flex justify-end">
								<button id="addItemBtn" type="button" class="bg-gray-900 hover:bg-gray-800 text-white px-4 py-2.5 rounded-lg font-semibold transition flex items-center gap-2">
									<i class="fa-solid fa-plus"></i> Add Item
								</button>
							</div>
						</div>
					</div>

					<div class="bg-white rounded-xl border border-gray-200 p-6">
						<div class="flex items-center justify-between mb-4">
							<h3 class="text-lg font-bold text-gray-900">Items List</h3>
							<span class="text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded">Items: <span id="itemCount">0</span></span>
						</div>
						<div id="itemsList" class="space-y-2">
							<p class="text-center text-gray-400 text-sm py-6">Items will appear here after adding them</p>
						</div>
					</div>
				</div>

				<!-- Right: Summary -->
				<div class="space-y-6">
					<div class="bg-white rounded-xl border border-gray-200 p-6">
						<h3 class="text-lg font-bold text-gray-900 mb-4">Summary</h3>
						<div class="space-y-3">
							<div class="flex justify-between text-sm">
								<span class="text-gray-600">Subtotal</span>
								<span class="font-semibold">Rs <span id="subtotal">0.00</span></span>
							</div>
							<div>
								<label class="block text-sm text-gray-600 mb-1">Discount (%)</label>
								<input id="discountPercent" type="number" min="0" step="0.01" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-100 focus:border-red-300 outline-none transition" placeholder="0">
							</div>
							<div>
								<label class="block text-sm text-gray-600 mb-1">Discount Amount</label>
								<input id="discountAmount" type="text" readonly value="Rs 0.00" class="w-full px-3 py-2 border border-gray-200 rounded-lg bg-gray-50 text-gray-700">
							</div>
							<div class="pt-3 border-t border-gray-200 flex justify-between items-center">
								<span class="text-sm text-gray-600">Total</span>
								<span class="text-xl font-bold text-red-600">Rs <span id="totalAmount">0.00</span></span>
							</div>
						</div>
					</div>

					<div class="bg-white rounded-xl border border-gray-200 p-6">
						<h3 class="text-lg font-bold text-gray-900 mb-4">Payment</h3>
						<div class="space-y-3">
							<div class="flex items-center gap-4">
								<label class="flex items-center gap-2 text-sm text-gray-700">
									<input type="radio" name="paymentType" value="full" checked>
									Full Payment
								</label>
								<label class="flex items-center gap-2 text-sm text-gray-700">
									<input type="radio" name="paymentType" value="partial">
									Partial Payment
								</label>
							</div>

							<div id="paidAmountDiv" class="hidden">
								<label class="block text-sm text-gray-600 mb-1">Paid Amount</label>
								<input id="paidAmount" type="number" min="0" step="0.01" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-100 focus:border-red-300 outline-none transition" placeholder="0.00">
								<div class="text-sm text-gray-500 mt-2">Remaining Balance: Rs <span id="remainingBalance">0.00</span></div>
							</div>
						</div>
					</div>

					<div class="bg-white rounded-xl border border-gray-200 p-6">
						<label class="block text-sm text-gray-600 mb-1">Notes</label>
						<textarea id="notes" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-100 focus:border-red-300 outline-none transition" placeholder="Optional notes..."></textarea>
					</div>

					<div class="flex flex-col gap-3">
						<button id="saveBillBtn" type="button" class="bg-red-600 hover:bg-red-700 text-white font-semibold py-2.5 rounded-lg transition">Save Bill</button>
						<button id="printBillBtn" type="button" class="bg-gray-900 hover:bg-gray-800 text-white font-semibold py-2.5 rounded-lg transition">Print Bill</button>
						<button id="resetBtn" type="button" class="bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-2.5 rounded-lg transition">Reset</button>
					</div>
				</div>
			</div>
		</div>
	</main>

	<script src="/assets/Js/components/sidebar.js"></script>
	<script>
		initSidebar('bill');
	</script>
	<script src="/assets/Js/bill.js"></script>
</body>
</html>
